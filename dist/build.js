!function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class i{constructor(e,t){this.size=t,this.img=e,this.images=[],this.visibleCards=[],this.matchCards=0,this.url="https://ec-test-react.herokuapp.com/"}generateCardImages(e){for(let t=0;t<this.size.width*this.size.height/2;t++)this.images[t]=e[t%e.length];this.images=this.images.concat(this.images),this.shuffle(this.images)}shuffle(e){for(let t=e.length;t;t--){let s=Math.floor(Math.random()*t);[e[t-1],e[s]]=[e[s],e[t-1]]}}createTable(e){let t=document.getElementById("content"),s="";for(let t=0;t<e.height;t++){s+="<div class='rows'>";for(let t=0;t<e.width;t++)s+="<div class='column'></div>";s+="</div>"}t.innerHTML+=s;let i=document.querySelectorAll(".column");for(let e=0;e<i.length;e++)i[e].innerHTML+=`<img src=${this.url}${this.images[e]}>`,i[e].addEventListener("click",this.handleCardClick.bind(this))}handleCardClick(e){!e.target.classList.contains("show")&&this.visibleCards.length<2&&(e.target.classList.toggle("show"),this.visibleCards.push(e.target),2===this.visibleCards.length&&this.checkMatch())}checkMatch(){this.visibleCards[0].getAttribute("src")===this.visibleCards[1].getAttribute("src")?(this.visibleCards=[],this.matchCards+=2,this.matchCards===this.size.width*this.size.height&&(h.stop(),this.winner())):setTimeout(this.unMatched.bind(this),1500)}unMatched(){this.visibleCards[0].classList.toggle("show"),this.visibleCards[1].classList.toggle("show"),this.visibleCards=[]}winner(){setTimeout(()=>{let e=localStorage.getItem("name");document.getElementById("content").innerHTML=`<h1> ${e} - WINNER !!!!</h1>`},1e3)}render(){this.generateCardImages(this.img),this.createTable(this.size),console.log(h.dBase)}}var r=new class{constructor(){this.url="https://ec-test-react.herokuapp.com/",this.images=[],this.size={}}requestSize(){return fetch(this.url+"api/v1/items").then(e=>e.json())}requestImages(){return fetch(this.url+"api/v1/pictures").then(e=>e.json())}request(){return Promise.all([this.requestImages(),this.requestSize()]).then(e=>e)}};let n=new class{constructor(){this.clock=document.getElementById("clock")}start(){let e=0,t=0,s=0;this.interval=setInterval(function(){let i=t<10?"0"+t:""+t,r=e<10?"0"+e:""+e;this.clock.innerHTML="0"+s+":"+i+":"+r,60==++e&&(t++,e=0),60==t&&(s++,t=0)},1e3)}stop(){clearInterval(this.interval)}};var h=t.default=n;(new class{constructor(){this.clock=document.getElementById("clock"),this.dBase=[]}events(){document.body.addEventListener("keydown",e=>{if("Enter"==e.key){document.querySelector(".login").style.opacity=0,document.querySelector(".login").style.top=0,document.querySelector(".login").style.height=0;let e=document.querySelector('input[type="text"]').value;localStorage.setItem("name",e),this.dBase.push({name:e,result:0})}}),document.getElementById("start").addEventListener("click",function(){document.getElementById("content").innerHTML="",r.request().then(e=>{let t=e[0],s={width:e[1].width%2?e[1].width+1:e[1].width,height:e[1].height%2?e[1].height+1:e[1].height},r=new i(t,s);document.getElementById("size").innerHTML=s.width+" : "+s.height,n.stop(),n.start(),setTimeout(()=>{r.render()},2e3)})})}render(){this.clock.innerHTML="Timer",this.events()}}).render()}]);